@startuml
actor Användare
participant "Onboarding System" as OS
participant "Employee Registry" as ER
participant "Employee" as Emp
participant "Contract" as Contract
participant "Inventory" as Inv
participant "Device" as Dev

title Onboardingflöde

== 1) Lägg till ny employee ==
Användare -> OS: Välj "Add employee"
OS -> Användare: Fråga efter namn, e-post, startdatum, roll
OS -> ER: Generera unik arbetsmail
OS -> Emp: Skapa ny employee och sätt arbetsmail
OS -> ER: Lägg till employee i registret
OS --> Användare: Bekräftelse

== 2) Hantera employee ==
Användare -> OS: Välj "Manage employee"
OS -> Användare: Fråga efter namn
OS -> ER: Sök i registret
ER --> OS: Returnerar inga / en / flera träffar

alt Inga träffar
  OS --> Användare: "Employee not found"
else En träff
  OS -> Emp: Visa undermeny för employee
else Flera träffar
  OS -> Användare: Visa lista över möjliga employees
  Användare -> OS: Välj en employee
  OS -> Emp: Visa undermeny
end

== 3) Undermeny för employee ==
Användare -> OS: Välj "Sign contract"
alt Inget kontrakt finns
  OS -> Contract: Skapa nytt kontrakt
  OS -> Contract: Signera kontrakt
  OS -> Emp: Koppla kontrakt
else Kontrakt finns redan
  alt Kontrakt redan signerat
    OS --> Användare: "Contract already signed"
  else Kontrakt ej signerat
    OS -> Contract: Signera kontrakt
    OS -> Emp: Uppdatera kontrakt
  end
end

Användare -> OS: Välj "Assign devices"
OS -> Inv: Visa lediga devices
Användare -> OS: Välj devices
loop För varje vald device
  OS -> Dev: Tilldela device till employee
  OS -> Emp: Lägg till device i listan
end

Användare -> OS: Välj "Mark onboarding as done"
OS -> Emp: Kontrollera att kontrakt är signerat
OS -> Emp: Kontrollera att minst en device finns
alt Villkor ej uppfyllda
  OS --> Användare: "Complete contract and devices first"
else Villkor uppfyllda
  OS -> Emp: Sätt onboardingstatus = klar
  OS --> Användare: "Onboarding complete"
end

== 4) Device-administration ==
Användare -> OS: Välj "Devices"
OS -> Användare: Visa meny (lista, lägg till, ta bort)

alt Lista
  OS -> Inv: Visa alla devices och status
else Lägg till
  OS -> Användare: Fråga efter typ och modell
  OS -> Inv: Lägg till ny device
else Ta bort
  OS -> Användare: Välj device att ta bort
  alt Device är utlånad
    OS --> Användare: "Cannot remove, device loaned"
  else Device ej utlånad
    OS -> Inv: Ta bort device
  end
end

@enduml
